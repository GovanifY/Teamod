using System;

namespace Teamod_2
{
	public partial class MainForm
	{
		int[] Marluxia_ML = new int[] {0x1000/* 00A */,0x9440/* 01A */,0x9440/* 01A */,0x14E70/* 03A */,0x1E3A0/* 04A */,0x28720/* 05A */,0x32080/* 20A */,0x3DB50/* 21A */,0x497F0/* 22A */,0x551D0/* 23A */,0x604B0/* 24A */,0x6BF30/* 25A */,0x78620/* 30A */,0x842F0/* 31A */,0x92400/* 32A */,0x9BD70/* 33A */,0x78620/* 30A */,0x92400/* 32A */,0x32080/* 20A */,0x604B0/* 24A */,0xA8EB0/* 70A */,0xC5BD0/* 90A */,0xEAFE0/* 91A */,0x9BD70/* 33A */,0x111820/* 10A */,0x119170/* 50A */,0x1244C0/* 51A */,0x12EF50/* 52A */,0x13DE50/* 53A */,0x14E430/* 54A */,0x179B00/* 55A */,0x189E70/* 56A */,0x197940/* 57A */,0x1A72D0/* 58A */,0x1D0B00/* 59A */,0x1E0560/* 60A */,0x1F8230/* 61A */,0x204A00/* 62A */,0x212D90/* 63A */,0x233C70/* 60B */,0x236B40/* 81A */};
		int[] Marluxia_ML_Length = new int[] {0x8440/* 00A */,0xBA2C/* 01A */,0xBA2C/* 01A */,0x952C/* 03A */,0xA380/* 04A */,0x9956/* 05A */,0xBAC8/* 20A */,0xBCA0/* 21A */,0xB9D8/* 22A */,0xB2E0/* 23A */,0xBA80/* 24A */,0xC6F0/* 25A */,0xBCD0/* 30A */,0xE10A/* 31A */,0x9970/* 32A */,0xD13A/* 33A */,0xBCD0/* 30A */,0x9970/* 32A */,0xBAC8/* 20A */,0xBA80/* 24A */,0x1CD16/* 70A */,0x2540C/* 90A */,0x26836/* 91A */,0xD13A/* 33A */,0x7942/* 10A */,0xB346/* 50A */,0xAA8C/* 51A */,0xEEF6/* 52A */,0x105D2/* 53A */,0x2B6CA/* 54A */,0x10364/* 55A */,0xDAC8/* 56A */,0xF984/* 57A */,0x2982C/* 58A */,0xFA60/* 59A */,0x17CCC/* 60A */,0xC7CA/* 61A */,0xE382/* 62A */,0x20EDA/* 63A */,0x2EC4/* 60B */,0x114FE/* 81A */};
		byte[] MarluxiaPAXAlgo = new byte[] {0x01,0x04,0x0A,0x00,0x45,0x00,0xFF,0xFF,0x00,0x00,0x00,0x00,0x17,0x01,0x00,0x00,0x40,0x00,0x18,0x01,0x03,0x00,0x01,0x00,0x01,0x01,0x19,0x00,0x00,0x00,0x01,0x00,0x0F,0x00};
		string[] MarluxiaIAStrings = new string[] {"appear","leave","freeze","event","idle_time","footwork","mode_battle","talk","near_wait","near","test_hana","test_midare","test_bomb","atk_kiri","atk_renkiri","atk_kukankiri","revenge_kukankiri","atk_yokokiri","atk_bloomshark","atk_bloomshark2","atk_bloomshark3","atk_hanamatoi","atk_midarezaki_single","atk_midarezaki","test_change_lv","atk_special","warp_target_attack","warp_target_short","warp_target_remove","walk","move_jump","idle","idle_long","idle_warp","test_blow","rc_lob_scythe","test_flash","test_rc_lob_scythe","rc_aerial_spin","test_rc_aerial_spin","test_down","btl_normal","rvg_normal","btl_hard","rvg_hard","btl_super_hard","rvg_super_hard","weak_mode","revenge","battle_start","mode_battle_boss","mode_revenge_boss","mode_revenge","dead"};
		int[] MarluxiaIAAddresses = new int[] {0x000924DE,0x000921B6,0x00092432,0x00092274,0x00092288,0x000922B4,0x000923FC,0x00092558,0x000925B2,0x0009255E,0x000922D6,0x000922F0,0x00092304,0x0009250A,0x0009245E,0x00092266,0x000925F8,0x0009229E,0x00092334,0x00092548,0x00092318,0x0009227A,0x00092344,0x000925DA,0x0009236C,0x0009246A,0x00092494,0x0009252C,0x0009238E,0x00092408,0x0009230E,0x000922BE,0x0009259E,0x000924D4,0x000923B2,0x00092450,0x000923C6,0x000923E8,0x00092574,0x0009241A,0x0009243A,0x00092444,0x00092520,0x0009247E,0x0009253E,0x000924C4,0x00092564,0x000921BC,0x00092476,0x000924A8,0x00092214,0x000921C6,0x000924E6,0x0009220E};
		int[] Marluxia_ECL = new int[] {0x8440,0xBA10,0xBA10,0x9510,0xA380,0x9940,0xBA90,0xBC80,0xB9B0,0xB2C0,0xBA60,0xC6D0,0xBCB0,0xE0F0,0x9950,0xD120,0xBCB0,0x9950,0xBA90,0xBA60,0x1CCA0,0x253B0,0x267B0,0xD120,0x7910,0xB2E0,0xAA70,0xEE80,0x10580,0x2B600,0x10310,0xDA70,0xF960,0x29800,0xFA40,0x17C70,0xC790,0xE350,0x20E60,0x2EA0,0x114C0};
		int[] Marluxia_ECL_Length = new int[] {0x0,0x1C,0x1C,0x1C,0x0,0x16,0x38,0x20,0x28,0x20,0x20,0x20,0x20,0x1A,0x20,0x1A,0x20,0x20,0x38,0x20,0x76,0x5C,0x86,0x1A,0x32,0x66,0x1C,0x76,0x52,0xCA,0x54,0x58,0x24,0x2C,0x20,0x5C,0x3A,0x32,0x7A,0x24,0x3E};
		
		
		void MarluxiaFilesFix()
		{
			ResetMset(Marluxia_ML,Marluxia_ECL,Marluxia_ECL_Length);
			/* MSET Fixes */
				
			/* MDLX Fixes */
				
			/* A.FM Fixes */
			SetPAXSize(0x19,1.8f,1.8f,0.3f);
			SetPAXRotation(0x19,3.1415f,0,0);
			SetPAXLocation(0x19,6,0,-370);
			SetPAXFixedToLocalFloor(0x19);
		}
		
		public void MarluxiaSection()
		{
			mdlxAddress = GetMDLXAddress(player_Ptr);
			afmAddress = GetAFMAddress(player_Ptr);
			bool SpeedChange = false;
			
			//Falling
			if (IsANBPlaying(player_Ptr,Marluxia_ML[4]))
		    {
		    	SetAnimationState(player_Ptr,0x40);
		    }
			
			//Drive Transition (When the character appears from drive)
			if (!arriveParFusion||!IsANBPlaying(player_Ptr,Marluxia_ML[0])||(IsANBPlaying(player_Ptr,Marluxia_ML[0])&&GetFrame(player_Ptr)>68))
		    {
				WriteInteger(msetAddress+Marluxia_ML[0]+0x28,msetAddress-0x20000000+Marluxia_ML[0]+0x50);
				if (IsANBPlaying(player_Ptr,Marluxia_ML[0]))
				SetPaxAlgoAddress(player_Ptr,msetAddress-0x20000000+Marluxia_ML[0]+0x50);
			}
			
			IopPlayer();
			if (!SpeedChange) SetSpeed(player_Ptr,1);
		}
	}
}
